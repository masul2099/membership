<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÁguaBenga  - Seja Membro!</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="icon" type="image/png" href="./img/favicon.png">
  <meta name="author" content="Mohamad Tarik Suleman">
  <meta name="description" content="Membros Limitados Para r=Reabastecimento - ÁguaBenga">
  <meta name="copyright" content="©2025, Mohamad Tarik Suleman.">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2NV25ZVPXW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-2NV25ZVPXW');
  </script>
</head>
<body>

    <section class="hero" id="home">

    <video autoplay muted loop id="background" poster="./img/bg.jpg">
      <source src="./img/bg.mp4" type="video/mp4">
    </video> 

    <div class="content">

        <div class="form">
            <h1>Torne-se Membro e Economize!</h1>
            <div class="border"></div>
            <p>
                Receba descontos exclusivos em cada reabastecimento!
            </p>
            <div class="border"></div>
              <form id="memberForm">
                <label for="fullname">Nome Completo</label>
                <input type="text" id="fullname" name="fullname" required />

                <label for="address">Endereço</label>
                <input type="text" id="address" name="address" required />

                <label for="cellphone">Telemóvel / WhatsApp</label>
                <input type="tel" id="cellphone" name="cellphone" placeholder="+258..." required />

                <button type="submit">Enviar</button>
              </form>
            <div class="footer">
            <a href="https://aguabenga.com/">www.aguabenga.com</a> 
            <img src="./img/logo.png" alt="" width="80">
            </div>

            <button id="myBtn">Open Modal</button>

        </div>   

    </div>

                  <!-- The Modal -->
              <div id="myModal" class="modal">
                <!-- Modal content -->
                <div class="modal-content">
                  <span class="close">&times;</span>
                  <div class="info">
                  <img src="https://img.icons8.com/?size=100&id=12226&format=png&color=000000" alt="" width="30">  
                  <p id="message">Algum erro ao enviar o registro.</p>
                  </div>  
                </div>
              </div>

  </section>




<script>

      // Get the modal
  let modal = document.getElementById("myModal");

  // Get the button that opens the modal
  let btn = document.getElementById("myBtn");

  // Get the <span> element that closes the modal
  let span = document.getElementsByClassName("close")[0];

  document.getElementById("memberForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const formData = new FormData(this);
    fetch("https://script.google.com/macros/s/AKfycbx-q4CKwhhnwsEaXHhTrJ7xHTFZDT2dUFnxcrLVJ3ABqiVl622P3efI1oxklW82SSOA/exec", {
      method: "POST",
      body: formData
    })
    .then(response => response.text())
    .then(result => {
      if (/^\d{4}$/.test(result)) {
      const url = `card.html?code=${encodeURIComponent(result)}`;
      window.location.href = url;
      } else {
        document.getElementById("message").innerText = "Algum erro ao enviar o registro.";
        modal.style.display = "block";
      }
    })
    .catch(() => {
      document.getElementById("message").innerText = "Falha de conexão.";
      modal.style.display = "block";
    });
  });

  btn.onclick = function() {
    modal.style.display = "block";
  }

  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }

</script>
    

</body>
</html>
